@host = http://localhost:8080
@tokenA = REPLACE_USER_A_TOKEN
@tokenB = REPLACE_USER_B_TOKEN
@workId = 10001
@contentId = 30001
@commentId = 90001

### 1. guest token A
POST {{host}}/api/v1/auth/guest
Content-Type: application/json

{
  "deviceId": "community-device-a"
}

### 2. guest token B
POST {{host}}/api/v1/auth/guest
Content-Type: application/json

{
  "deviceId": "community-device-b"
}

### 3. publish content
POST {{host}}/api/v1/community/contents
Authorization: Bearer {{tokenA}}
Content-Type: application/json

{
  "workId": {{workId}},
  "title": "第一话：雨夜相遇",
  "description": "测试发布到社区"
}

### 4. publish duplicate work (expect 4091)
POST {{host}}/api/v1/community/contents
Authorization: Bearer {{tokenA}}
Content-Type: application/json

{
  "workId": {{workId}},
  "title": "重复发布",
  "description": "应返回重复发布错误"
}

### 5. feed latest
GET {{host}}/api/v1/community/contents?tab=latest&cursor=0&limit=20
Authorization: Bearer {{tokenA}}

### 6. feed hot
GET {{host}}/api/v1/community/contents?tab=hot&cursor=0&limit=20
Authorization: Bearer {{tokenA}}

### 7. content detail
GET {{host}}/api/v1/community/contents/{{contentId}}
Authorization: Bearer {{tokenA}}

### 8. like toggle on
POST {{host}}/api/v1/community/contents/{{contentId}}/like
Authorization: Bearer {{tokenA}}
Content-Type: application/json

{
  "action": "TOGGLE"
}

### 9. like toggle off
POST {{host}}/api/v1/community/contents/{{contentId}}/like
Authorization: Bearer {{tokenA}}
Content-Type: application/json

{
  "action": "TOGGLE"
}

### 10. favorite toggle on
POST {{host}}/api/v1/community/contents/{{contentId}}/favorite
Authorization: Bearer {{tokenA}}
Content-Type: application/json

{
  "action": "TOGGLE"
}

### 11. favorite toggle off
POST {{host}}/api/v1/community/contents/{{contentId}}/favorite
Authorization: Bearer {{tokenA}}
Content-Type: application/json

{
  "action": "TOGGLE"
}

### 12. list comments
GET {{host}}/api/v1/community/contents/{{contentId}}/comments?cursor=0&limit=20
Authorization: Bearer {{tokenA}}

### 13. create comment
POST {{host}}/api/v1/community/contents/{{contentId}}/comments
Authorization: Bearer {{tokenA}}
Content-Type: application/json

{
  "text": "这个剧情很有意思！"
}

### 14. create sensitive comment (expect 4510)
POST {{host}}/api/v1/community/contents/{{contentId}}/comments
Authorization: Bearer {{tokenA}}
Content-Type: application/json

{
  "text": "包含敏感词 fuck"
}

### 15. delete comment (author/comment owner)
DELETE {{host}}/api/v1/community/comments/{{commentId}}
Authorization: Bearer {{tokenA}}

### 16. my favorites
GET {{host}}/api/v1/community/me/favorites?cursor=0&limit=20
Authorization: Bearer {{tokenA}}

### 17. my published
GET {{host}}/api/v1/community/me/contents?cursor=0&limit=20
Authorization: Bearer {{tokenA}}

### 18. hide content
POST {{host}}/api/v1/community/contents/{{contentId}}/hide
Authorization: Bearer {{tokenA}}

### 19. delete content
DELETE {{host}}/api/v1/community/contents/{{contentId}}
Authorization: Bearer {{tokenA}}

### 20. unauthorized like (expect 4010)
POST {{host}}/api/v1/community/contents/{{contentId}}/like
Content-Type: application/json

{
  "action": "TOGGLE"
}
