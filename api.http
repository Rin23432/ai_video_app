@host = http://localhost:8080
@guestDeviceId = android-device-001
@guestToken = REPLACE_GUEST_TOKEN
@userToken = REPLACE_USER_TOKEN
@contentId = REPLACE_CONTENT_ID

### 01. Guest login: issue token by deviceId
POST {{host}}/api/v1/auth/guest
Content-Type: application/json

{
  "deviceId": "{{guestDeviceId}}"
}

### 02. Guest get me profile
GET {{host}}/api/v1/me
Authorization: Bearer {{guestToken}}

### 03. Guest update profile (allowed)
PUT {{host}}/api/v1/me/profile
Authorization: Bearer {{guestToken}}
Content-Type: application/json

{
  "nickname": "Guest-A",
  "bio": "just browsing",
  "avatarUrl": "https://example.com/avatar/guest-a.png"
}

### 04. Guest like community content -> expect 40100
POST {{host}}/api/v1/community/contents/{{contentId}}/like
Authorization: Bearer {{guestToken}}
Content-Type: application/json

{
  "action": "TOGGLE"
}

### 05. Register user (optional endpoint)
POST {{host}}/api/v1/auth/register
Content-Type: application/json

{
  "username": "demo_user_01",
  "password": "123456",
  "nickname": "Demo 01"
}

### 06. User login
POST {{host}}/api/v1/auth/login
Content-Type: application/json

{
  "username": "demo_user_01",
  "password": "123456"
}

### 07. User get me profile
GET {{host}}/api/v1/me
Authorization: Bearer {{userToken}}

### 08. User update profile
PUT {{host}}/api/v1/me/profile
Authorization: Bearer {{userToken}}
Content-Type: application/json

{
  "nickname": "Demo Updated",
  "bio": "I like anime",
  "avatarUrl": "https://example.com/avatar/demo.png"
}

### 09. User publish content (requires READY work in DB, e.g. workId=10001)
POST {{host}}/api/v1/community/contents
Authorization: Bearer {{userToken}}
Content-Type: application/json

{
  "workId": 10001,
  "title": "My First Publish",
  "description": "for auth-link acceptance",
  "tagIds": [1, 2]
}

### 10. Detail with viewerState before interaction (liked=false,favorited=false)
GET {{host}}/api/v1/community/contents/{{contentId}}
Authorization: Bearer {{userToken}}

### 11. User toggle like
POST {{host}}/api/v1/community/contents/{{contentId}}/like
Authorization: Bearer {{userToken}}
Content-Type: application/json

{
  "action": "TOGGLE"
}

### 12. Detail after like (viewerState.liked should be true)
GET {{host}}/api/v1/community/contents/{{contentId}}
Authorization: Bearer {{userToken}}

### 13. User toggle favorite
POST {{host}}/api/v1/community/contents/{{contentId}}/favorite
Authorization: Bearer {{userToken}}
Content-Type: application/json

{
  "action": "TOGGLE"
}

### 14. Detail after favorite (viewerState.favorited should be true)
GET {{host}}/api/v1/community/contents/{{contentId}}
Authorization: Bearer {{userToken}}

### 15. Missing token create comment -> expect 40100
POST {{host}}/api/v1/community/contents/{{contentId}}/comments
Content-Type: application/json

{
  "text": "need login"
}

### 16. Community content search
GET {{host}}/api/v1/community/contents/search?keyword=anime&cursor=0&limit=20
Authorization: Bearer {{userToken}}
