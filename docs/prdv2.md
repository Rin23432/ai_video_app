ä¸‹é¢ç»™ä½ ä¸€ä»½**â€œåˆ›ä½œè€…ç¤¾åŒºâ€æ¨¡å—**çš„ **PRD + æŠ€æœ¯æ–¹æ¡ˆï¼ˆAI å¯è¯»ç‰ˆï¼‰**ã€‚å®ƒçš„å†™æ³•åˆ»æ„åâ€œå·¥ç¨‹äº¤ä»˜â€ï¼Œæ–¹ä¾¿ä½ ç›´æ¥ä¸¢ç»™ AI ç”Ÿæˆä»£ç ï¼šåŒ…å«**èŒƒå›´ã€é¡µé¢ã€çŠ¶æ€æœºã€æ¥å£ã€è¡¨ç»“æ„ã€ç¼“å­˜ã€å¹‚ç­‰ã€éªŒæ”¶æ¸…å•**ã€‚ä½ å¯ä»¥æŠŠå®ƒä½œä¸º `PRD_CREATOR_COMMUNITY.md` æ”¾è¿›ä»“åº“å½“çœŸç†æº ğŸ“Œâœ¨

---

# åˆ›ä½œè€…ç¤¾åŒºæ¨¡å— PRD + æŠ€æœ¯æ–¹æ¡ˆï¼ˆAI å¯è¯»ç‰ˆï¼‰

## 0. æ¨¡å—ç›®æ ‡

åœ¨ç°æœ‰â€œAI æ¼«å‰§ç”Ÿæˆå™¨â€åŸºç¡€ä¸Šæ–°å¢ **åˆ›ä½œè€…ç¤¾åŒº**ï¼šç”¨æˆ·å‘å¸ƒä½œå“åˆ°ç¤¾åŒºï¼Œå…¶ä»–ç”¨æˆ·å¯æµè§ˆã€ç‚¹èµã€è¯„è®ºã€æ”¶è—ã€å…³æ³¨ä½œè€…ï¼ˆå…³æ³¨ä¸ºå¯é€‰æ‰©å±•ï¼‰ã€‚æ¨¡å—å‚è€ƒ LOFTER çš„â€œå†…å®¹æµ + äº’åŠ¨ + ä¸ªäººä¸»é¡µ/ä½œå“é›†â€ä½“éªŒï¼Œä½†**æœ¬æœŸä¸åšå•†ä¸šåŒ–**ã€‚

## 1. ç‰ˆæœ¬èŒƒå›´

### 1.1 MVPï¼ˆæœ¬æœŸå¿…é¡»äº¤ä»˜ï¼‰

- ä½œå“å‘å¸ƒï¼ˆä»â€œæˆ‘çš„ä½œå“â€/â€œä½œå“è¯¦æƒ…â€å‘å¸ƒåˆ°ç¤¾åŒºï¼‰
- ç¤¾åŒºå†…å®¹æµï¼ˆå‘ç°é¡µï¼‰ï¼šçƒ­é—¨/æœ€æ–° ä¸¤ä¸ª tabï¼ˆç®€å•è§„åˆ™ï¼‰
- ä½œå“è¯¦æƒ…é¡µï¼šæ’­æ”¾/å›¾æ–‡å±•ç¤º + ç‚¹èµ + æ”¶è— + è¯„è®ºåˆ—è¡¨ + å‘è¡¨è¯„è®º
- æˆ‘çš„ï¼šæˆ‘çš„å‘å¸ƒä½œå“ç®¡ç†ï¼ˆä¸‹æ¶/åˆ é™¤ï¼‰
- åŸºç¡€å†…å®¹å®‰å…¨ï¼šæ•æ„Ÿè¯è¿‡æ»¤ï¼ˆæ–‡æœ¬ï¼‰+ ç®¡ç†å‘˜ä¸‹æ¶

### 1.2 V1ï¼ˆä¸‹ä¸€æœŸæ‰©å±•ï¼‰

- å…³æ³¨/ç²‰ä¸ç³»ç»Ÿ + å…³æ³¨æµ
- @æåŠã€è¯„è®ºé€šçŸ¥
- æ ‡ç­¾ç³»ç»Ÿï¼ˆåœˆå­/è¯é¢˜ï¼‰+ æœç´¢å¢å¼ºï¼ˆESï¼‰
- æ’è¡Œæ¦œï¼ˆå‘¨æ¦œ/æœˆæ¦œï¼‰

---

## 2. è§’è‰²ä¸æƒé™

- æ¸¸å®¢ï¼šå¯æµè§ˆå…¬å¼€å†…å®¹ï¼›ä¸å¯ç‚¹èµ/è¯„è®º/æ”¶è—/å‘å¸ƒ
- æ™®é€šç”¨æˆ·ï¼šå¯å‘å¸ƒã€ç‚¹èµã€è¯„è®ºã€æ”¶è—ï¼›å¯åˆ é™¤è‡ªå·±çš„è¯„è®º/ä½œå“
- ç®¡ç†å‘˜ï¼šå¯ä¸‹æ¶ä»»ä½•ä½œå“ã€åˆ é™¤è¿è§„è¯„è®ºã€å°ç¦ç”¨æˆ·ï¼ˆåå°æ¥å£ï¼‰

---

## 3. æ ¸å¿ƒå¯¹è±¡å®šä¹‰ï¼ˆé¢†åŸŸæ¨¡å‹ï¼‰

- **Contentï¼ˆç¤¾åŒºä½œå“ï¼‰**ï¼šåˆ›ä½œè€…å‘å¸ƒçš„ä½œå“ï¼ˆè§†é¢‘æ¼«å‰§æˆ–å›¾æ–‡ï¼‰
- **Commentï¼ˆè¯„è®ºï¼‰**ï¼šä½œå“ä¸‹è¯„è®ºï¼Œæ”¯æŒä¸€çº§è¯„è®º + äºŒçº§å›å¤ï¼ˆMVP å¯å…ˆåªåšä¸€çº§ï¼‰
- **Likeï¼ˆç‚¹èµï¼‰**ï¼šç”¨æˆ·å¯¹ä½œå“ç‚¹èµï¼ˆå¯å–æ¶ˆï¼‰
- **Favoriteï¼ˆæ”¶è—ï¼‰**ï¼šç”¨æˆ·æ”¶è—ä½œå“ï¼ˆå¯å–æ¶ˆï¼‰
- **Userï¼ˆç”¨æˆ·ï¼‰**ï¼šä½œè€…ã€è¯„è®ºè€…ã€ç‚¹èµè€…

---

## 4. ç”¨æˆ·æ•…äº‹ï¼ˆUser Storiesï¼‰

1. ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘æƒ³åœ¨å‘ç°é¡µåˆ·åˆ°åˆ«äººå‘å¸ƒçš„æ¼«å‰§ï¼Œç‚¹å¼€èƒ½çœ‹è¯¦æƒ…å¹¶äº’åŠ¨ã€‚
2. ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘æƒ³ç»™å–œæ¬¢çš„ä½œå“ç‚¹èµ/æ”¶è—ï¼Œä¹‹ååœ¨â€œæˆ‘çš„æ”¶è—â€é‡Œèƒ½æ‰¾åˆ°ã€‚
3. ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘æƒ³è¯„è®ºä½œå“å¹¶çœ‹åˆ°è¯„è®ºåˆ—è¡¨ï¼Œä½œè€…ä¹Ÿèƒ½çœ‹åˆ°å¹¶ç®¡ç†ã€‚
4. ä½œä¸ºä½œè€…ï¼Œæˆ‘æƒ³æŠŠæˆ‘ç”Ÿæˆçš„ä½œå“å‘å¸ƒåˆ°ç¤¾åŒºï¼Œå¹¶èƒ½ä¸‹æ¶/åˆ é™¤ã€‚
5. ä½œä¸ºç®¡ç†å‘˜ï¼Œæˆ‘æƒ³å¯¹è¿è§„ä½œå“ä¸‹æ¶ã€å¯¹è¿è§„è¯„è®ºåˆ é™¤ã€‚

---

## 5. äº¤äº’ä¸é¡µé¢ PRD

## 5.1 é¡µé¢ç»“æ„ï¼ˆAndroid Composeï¼‰

æ–°å¢å¯¼èˆªå…¥å£ï¼š`CreatorCommunity`ï¼ˆå‘ç°é¡µï¼‰

### A. å‘ç°é¡µï¼ˆCommunityFeedScreenï¼‰

- Tabsï¼š**æœ€æ–°** / **çƒ­é—¨**
- åˆ—è¡¨ Item å±•ç¤ºï¼š
  - å°é¢å›¾ coverUrl
  - æ ‡é¢˜ title
  - ä½œè€… avatar + nickname
  - ç‚¹èµæ•° likeCountã€è¯„è®ºæ•° commentCountã€æ”¶è—æ•° favoriteCount

- ç‚¹å‡» Itemï¼šè¿›å…¥ä½œå“è¯¦æƒ… `ContentDetailScreen(contentId)`
- ä¸‹æ‹‰åˆ·æ–° + ä¸Šæ‹‰åˆ†é¡µ

**æœ€æ–°**æ’åºè§„åˆ™ï¼šæŒ‰ `publishTime desc`
**çƒ­é—¨**æ’åºè§„åˆ™ï¼ˆMVPï¼‰ï¼šæŒ‰ `hotScore desc`ï¼ˆåç«¯è®¡ç®—æˆ– Redis zsetï¼‰

### B. ä½œå“è¯¦æƒ…é¡µï¼ˆContentDetailScreenï¼‰

- å†…å®¹å±•ç¤ºï¼ˆè§†é¢‘ç”¨ Media3 æ’­æ”¾ï¼›å›¾æ–‡åˆ™å›¾ç‰‡åˆ—è¡¨ï¼‰
- ä½œè€…ä¿¡æ¯åŒºåŸŸï¼ˆå¤´åƒã€æ˜µç§°ã€è¿›å…¥ä½œè€…ä¸»é¡µ - V1ï¼‰
- äº’åŠ¨æŒ‰é’®ï¼š
  - ç‚¹èµï¼ˆtoggleï¼‰
  - æ”¶è—ï¼ˆtoggleï¼‰
  - è¯„è®ºå…¥å£ï¼ˆæ‹‰èµ·è¾“å…¥æ¡†ï¼‰

- è¯„è®ºåˆ—è¡¨ï¼š
  - ä¸€çº§è¯„è®ºåˆ—è¡¨ï¼ˆMVPï¼‰
  - æ¯æ¡è¯„è®ºï¼šå¤´åƒã€æ˜µç§°ã€å†…å®¹ã€æ—¶é—´ï¼›å¦‚æœæ˜¯ä½œè€…/æœ¬äººå¯åˆ é™¤

### C. å‘å¸ƒé¡µï¼ˆPublishContentScreenï¼‰

å…¥å£ï¼šä»â€œæˆ‘çš„ä½œå“ WorkDetailâ€ç‚¹å‡»â€œå‘å¸ƒåˆ°ç¤¾åŒºâ€

- å¡«å†™ï¼šæ ‡é¢˜ï¼ˆå¿…å¡«ï¼‰ã€ç®€ä»‹ï¼ˆå¯é€‰ï¼‰ã€æ ‡ç­¾ï¼ˆV1ï¼‰ã€å¯è§æ€§ï¼ˆMVP åªå…¬å¼€ï¼‰
- å‘å¸ƒæŒ‰é’®ï¼šè°ƒç”¨åç«¯å‘å¸ƒæ¥å£ï¼ŒæˆåŠŸåè·³è½¬å†…å®¹è¯¦æƒ…é¡µ

### D. æˆ‘çš„æ”¶è—é¡µï¼ˆMyFavoritesScreenï¼‰

- å±•ç¤ºæ”¶è—è¿‡çš„ä½œå“åˆ—è¡¨
- å¯å–æ¶ˆæ”¶è—

### E. æˆ‘çš„å‘å¸ƒé¡µï¼ˆMyPublishedScreenï¼‰

- å±•ç¤ºæˆ‘å‘å¸ƒçš„ä½œå“
- æ”¯æŒï¼šä¸‹æ¶ã€åˆ é™¤ï¼ˆåˆ é™¤=ä¸å¯æ¢å¤ï¼›ä¸‹æ¶=ä¸å¯è§ä½†ä¿ç•™æ•°æ®ï¼‰

---

## 6. çŠ¶æ€æœºä¸ä¸šåŠ¡è§„åˆ™

## 6.1 Content çŠ¶æ€

- `DRAFT`ï¼šè‰ç¨¿ï¼ˆç”Ÿæˆåä½†æœªå‘å¸ƒï¼‰
- `PUBLISHED`ï¼šå·²å‘å¸ƒï¼ˆç¤¾åŒºå¯è§ï¼‰
- `HIDDEN`ï¼šä½œè€…ä¸‹æ¶ï¼ˆä»…ä½œè€…å¯è§ï¼‰
- `REMOVED`ï¼šç®¡ç†å‘˜ä¸‹æ¶/åˆ é™¤ï¼ˆä¸å¯è§ï¼‰

è§„åˆ™ï¼š

- `DRAFT -> PUBLISHED`ï¼šå‘å¸ƒ
- `PUBLISHED -> HIDDEN`ï¼šä½œè€…ä¸‹æ¶
- `HIDDEN -> PUBLISHED`ï¼šä½œè€…é‡æ–°ä¸Šæ¶ï¼ˆå¯é€‰ï¼‰
- `PUBLISHED/HIDDEN -> REMOVED`ï¼šç®¡ç†å‘˜æ“ä½œ
- `PUBLISHED -> REMOVED`ï¼šè¿è§„ç›´æ¥ä¸‹æ¶

## 6.2 Like/Favorite è§„åˆ™

- ç‚¹èµ/æ”¶è—å‡ä¸º toggleï¼šé‡å¤è¯·æ±‚åº”å¹‚ç­‰
- æ¯ä¸ªç”¨æˆ·å¯¹åŒä¸€ content åªå…è®¸ 0/1 æ¡ like æˆ– favorite è®°å½•
- ç‚¹èµ/æ”¶è—è®¡æ•°ï¼šæœ€ç»ˆä¸€è‡´ï¼ˆå¯ç¼“å­˜ + å¼‚æ­¥è½åº“ï¼‰

## 6.3 Comment è§„åˆ™

- è¯„è®ºå†…å®¹é•¿åº¦é™åˆ¶ï¼š1 ~ 300 å­—ï¼ˆMVPï¼‰
- æ•æ„Ÿè¯è¿‡æ»¤ï¼šå‘½ä¸­åˆ™æ‹’ç»ï¼ˆè¿”å›é”™è¯¯ç ï¼‰
- åˆ é™¤æƒé™ï¼šæœ¬äººæˆ–ç®¡ç†å‘˜å¯åˆ é™¤ï¼›ä½œè€…å¯åˆ é™¤ä½œå“ä¸‹æ‰€æœ‰è¯„è®ºï¼ˆå¯é€‰ï¼‰

---

## 7. åç«¯æŠ€æœ¯æ–¹æ¡ˆï¼ˆSSM + MyBatis + Redis + MySQLï¼‰

## 7.1 åç«¯æ¨¡å—æ‹†åˆ†ï¼ˆå»ºè®®ï¼‰

- `community-controller`ï¼ˆæˆ–åœ¨å·²æœ‰ api æ¨¡å—å†…æ–°å¢ packageï¼‰
- `community-service`
- `community-dao`
- `community-common`ï¼ˆé”™è¯¯ç ã€DTOï¼‰

---

## 8. MySQL è¡¨è®¾è®¡ï¼ˆSQL å¿…é¡»ç”Ÿæˆï¼‰

### 8.1 `content`ï¼ˆç¤¾åŒºä½œå“ï¼‰

> å¦‚æœä½ å·²æœ‰ `work` è¡¨ï¼ˆç”Ÿæˆä½œå“ï¼‰ï¼Œå»ºè®®åš**åˆ†å±‚**ï¼š

- `work` = ç”Ÿæˆäº§ç‰©
- `content` = ç¤¾åŒºå‘å¸ƒå®ä½“ï¼ˆå¼•ç”¨ workIdï¼‰
  è¿™æ ·æ›´åƒæˆç†Ÿæ¶æ„ï¼ˆç”Ÿæˆç³»ç»Ÿä¸ç¤¾åŒºç³»ç»Ÿè§£è€¦ï¼‰ã€‚

å­—æ®µï¼š

- `id` BIGINT PK
- `work_id` BIGINT NOT NULLï¼ˆå¼•ç”¨ç”Ÿæˆä½œå“ï¼‰
- `author_id` BIGINT NOT NULL
- `title` VARCHAR(128) NOT NULL
- `description` VARCHAR(512) NULL
- `media_type` VARCHAR(16) NOT NULLï¼ˆVIDEO/IMAGEï¼‰
- `cover_url` VARCHAR(512) NOT NULL
- `media_url` VARCHAR(512) NOT NULLï¼ˆè§†é¢‘æˆ–é¦–å›¾/å›¾æ–‡å…¥å£ï¼‰
- `status` VARCHAR(16) NOT NULLï¼ˆDRAFT/PUBLISHED/HIDDEN/REMOVEDï¼‰
- `like_count` INT NOT NULL DEFAULT 0
- `favorite_count` INT NOT NULL DEFAULT 0
- `comment_count` INT NOT NULL DEFAULT 0
- `hot_score` BIGINT NOT NULL DEFAULT 0
- `publish_time` DATETIME NULL
- `created_at` DATETIME NOT NULL
- `updated_at` DATETIME NOT NULL

ç´¢å¼•ï¼š

- `idx_content_publish_time(publish_time)`
- `idx_content_hot_score(hot_score)`
- `idx_content_author(author_id, publish_time)`
- `idx_content_status(status, publish_time)`

### 8.2 `content_like`

- `id` BIGINT PK
- `content_id` BIGINT NOT NULL
- `user_id` BIGINT NOT NULL
- `created_at` DATETIME NOT NULL
  å”¯ä¸€ç´¢å¼•ï¼š
- `uk_like(content_id, user_id)`

### 8.3 `content_favorite`

- `id` BIGINT PK
- `content_id` BIGINT NOT NULL
- `user_id` BIGINT NOT NULL
- `created_at` DATETIME NOT NULL
  å”¯ä¸€ç´¢å¼•ï¼š
- `uk_fav(content_id, user_id)`

### 8.4 `content_comment`

ï¼ˆMVP ä¸€çº§è¯„è®ºï¼‰

- `id` BIGINT PK
- `content_id` BIGINT NOT NULL
- `user_id` BIGINT NOT NULL
- `text` VARCHAR(300) NOT NULL
- `status` VARCHAR(16) NOT NULLï¼ˆNORMAL/DELETEDï¼‰
- `created_at` DATETIME NOT NULL
  ç´¢å¼•ï¼š
- `idx_comment_content(content_id, created_at)`
- `idx_comment_user(user_id, created_at)`

ï¼ˆV1 äºŒçº§å›å¤æ‰©å±•å­—æ®µï¼‰

- `parent_id` BIGINT NULLï¼ˆå›å¤å“ªæ¡è¯„è®ºï¼‰

---

## 9. Redis è®¾è®¡ï¼ˆç¼“å­˜ã€æ¦œå•ã€é™æµï¼‰

### 9.1 çƒ­é—¨æ¦œï¼ˆæ¨èï¼‰

- `zset:content:hot`
  member = contentId
  score = hotScore
  æ›´æ–°æ–¹å¼ï¼š
- ç‚¹èµ/æ”¶è—/è¯„è®ºå‘ç”Ÿæ—¶å¢é‡æ›´æ–° scoreï¼ˆå¦‚ +2/+3/+5ï¼‰
- å®šæ—¶ä»»åŠ¡æ¯å°æ—¶æŠŠ zset topN å›å†™ `content.hot_score`ï¼ˆå¯é€‰ï¼‰

### 9.2 è®¡æ•°ç¼“å­˜ï¼ˆå¯é€‰ï¼‰

- `hash:content:count:{contentId}`
  fields: likeCount, favoriteCount, commentCount
  ç”¨äºå¿«é€Ÿè¯»ï¼Œæœ€ç»ˆä»¥ MySQL ä¸ºå‡†ï¼ˆæœ€ç»ˆä¸€è‡´ï¼‰

### 9.3 é™æµ

- `rl:like:{userId}:{contentId}`ï¼ˆé˜²è¿ç‚¹ï¼Œ1sï¼‰
- `rl:comment:{userId}:{minute}`ï¼ˆæ¯åˆ†é’Ÿæœ€å¤š N æ¡ï¼‰

---

## 10. API è®¾è®¡ï¼ˆRESTfulï¼Œå¿…é¡»å®ç°ï¼‰

### 10.1 å‘å¸ƒå†…å®¹

`POST /api/v1/community/contents`
Requestï¼š

```json
{
  "workId": 10001,
  "title": "ç¬¬ä¸€é›†ï¼šæ¨±èŠ±æ ‘ä¸‹",
  "description": "ä¸€ä¸ªé›¨å¤œçš„ç›¸é‡"
}
```

Responseï¼š

```json
{ "contentId": 20001 }
```

è§„åˆ™ï¼š

- work å¿…é¡»å±äºå½“å‰ç”¨æˆ·
- work å¿…é¡» READYï¼ˆæœ‰ videoUrl/coverUrlï¼‰

### 10.2 å†…å®¹æµï¼ˆåˆ†é¡µï¼‰

`GET /api/v1/community/contents?tab=latest&cursor=0&limit=20`
`tab`ï¼šlatest/hot

Responseï¼š

```json
{
  "items": [
    {
      "contentId": 20001,
      "title": "...",
      "coverUrl": "...",
      "author": { "userId": 1, "nickname": "...", "avatarUrl": "..." },
      "likeCount": 12,
      "favoriteCount": 3,
      "commentCount": 4,
      "publishTime": "2026-02-15T12:00:00"
    }
  ],
  "nextCursor": 20
}
```

### 10.3 å†…å®¹è¯¦æƒ…

`GET /api/v1/community/contents/{contentId}`
Responseï¼ˆåŒ…å«å½“å‰ç”¨æˆ·äº’åŠ¨çŠ¶æ€ï¼‰ï¼š

```json
{
  "contentId": 20001,
  "workId": 10001,
  "title": "...",
  "description": "...",
  "mediaType": "VIDEO",
  "coverUrl": "...",
  "mediaUrl": "...",
  "author": { "userId": 1, "nickname": "...", "avatarUrl": "..." },
  "likeCount": 12,
  "favoriteCount": 3,
  "commentCount": 4,
  "viewerState": { "liked": true, "favorited": false },
  "publishTime": "..."
}
```

### 10.4 ç‚¹èµ Toggleï¼ˆå¹‚ç­‰ï¼‰

`POST /api/v1/community/contents/{contentId}/like`
Requestï¼š

```json
{ "action": "TOGGLE" }
```

Responseï¼š

```json
{ "liked": true, "likeCount": 13 }
```

### 10.5 æ”¶è— Toggleï¼ˆå¹‚ç­‰ï¼‰

`POST /api/v1/community/contents/{contentId}/favorite`
Responseï¼š

```json
{ "favorited": true, "favoriteCount": 4 }
```

### 10.6 è¯„è®ºåˆ—è¡¨

`GET /api/v1/community/contents/{contentId}/comments?cursor=0&limit=20`
Responseï¼š

```json
{
  "items": [
    { "commentId": 9001, "user": {...}, "text": "...", "createdAt": "..." }
  ],
  "nextCursor": 20
}
```

### 10.7 å‘è¡¨è¯„è®º

`POST /api/v1/community/contents/{contentId}/comments`
Requestï¼š

```json
{ "text": "å¤ªå¥½çœ‹äº†ï¼" }
```

Responseï¼š

```json
{ "commentId": 9001, "commentCount": 5 }
```

### 10.8 åˆ é™¤è¯„è®º

`DELETE /api/v1/community/comments/{commentId}`

### 10.9 æˆ‘çš„æ”¶è—

`GET /api/v1/community/me/favorites?cursor=0&limit=20`

### 10.10 æˆ‘çš„å‘å¸ƒ

`GET /api/v1/community/me/contents?cursor=0&limit=20`

### 10.11 ä¸‹æ¶/åˆ é™¤ï¼ˆä½œè€…ï¼‰

`POST /api/v1/community/contents/{contentId}/hide`
`DELETE /api/v1/community/contents/{contentId}`

### 10.12 ç®¡ç†å‘˜ä¸‹æ¶ï¼ˆå¯é€‰ï¼‰

`POST /api/v1/admin/community/contents/{contentId}/remove`

---

## 11. é”™è¯¯ç è§„èŒƒï¼ˆç¤ºä¾‹ï¼‰

- `40001` å‚æ•°éæ³•
- `40100` æœªç™»å½•
- `40300` æ— æƒé™ï¼ˆä¸æ˜¯ä½œè€…/ç®¡ç†å‘˜ï¼‰
- `40400` content ä¸å­˜åœ¨
- `40901` é‡å¤å‘å¸ƒï¼ˆåŒ workId å·²å‘å¸ƒï¼‰
- `42900` æ“ä½œå¤ªé¢‘ç¹ï¼ˆé™æµï¼‰
- `45100` å‘½ä¸­æ•æ„Ÿè¯ï¼ˆæ–‡æœ¬è¿è§„ï¼‰

---

## 12. å¹‚ç­‰ä¸ä¸€è‡´æ€§ç­–ç•¥ï¼ˆå¿…é¡»å®ç°ï¼‰

### 12.1 ç‚¹èµ/æ”¶è—å¹‚ç­‰

å®ç°æ–¹å¼ï¼š

- DB å”¯ä¸€ç´¢å¼• `uk_like(content_id, user_id)`
- Toggle é€»è¾‘ï¼š
  - å°è¯• insertï¼šæˆåŠŸåˆ™ liked=true å¹¶ count+1
  - insert å¤±è´¥ï¼ˆduplicateï¼‰åˆ™ delete å¹¶ count-1

- count æ›´æ–°å¿…é¡»åœ¨äº‹åŠ¡å†…ï¼Œä¸”ä¸å¾—å°äº 0

### 12.2 è¯„è®ºè®¡æ•°ä¸€è‡´æ€§

- å†™è¯„è®ºæˆåŠŸï¼š`content.comment_count + 1`
- åˆ é™¤è¯„è®ºï¼š`comment.status = DELETED`ï¼Œ`content.comment_count - 1`ï¼ˆ>=0ï¼‰
- åˆ—è¡¨æŸ¥è¯¢åªè¯» NORMAL

---

## 13. Android å®¢æˆ·ç«¯æŠ€æœ¯è½åœ°ï¼ˆCompose ä»»åŠ¡æ¸…å•ï¼‰

### 13.1 æ–°å¢è·¯ç”±

- `community/feed`
- `community/detail/{contentId}`
- `community/publish/{workId}`
- `community/myFavorites`
- `community/myPublished`

### 13.2 ViewModel çŠ¶æ€ï¼ˆå¿…é¡»ï¼‰

- FeedStateï¼šloadingã€itemsã€nextCursorã€error
- DetailStateï¼šcontentã€commentsã€viewerStateã€submittingCommentã€error
- PublishStateï¼štitleã€descã€postingã€error

### 13.3 UI/äº¤äº’è¦æ±‚

- ç‚¹èµ/æ”¶è—ï¼šä¹è§‚æ›´æ–°ï¼ˆå…ˆæ”¹ UIï¼‰+ å¤±è´¥å›æ»šï¼ˆtoastï¼‰
- è¯„è®ºï¼šå‘é€åæ’å…¥åˆ—è¡¨å¤´éƒ¨ + æ¸…ç©ºè¾“å…¥æ¡†
- é€€å‡ºè¯¦æƒ…é¡µåœæ­¢ä»»ä½•è½®è¯¢/è¯·æ±‚ï¼ˆåç¨‹ cancelï¼‰

---

## 14. éªŒæ”¶æ¸…å•ï¼ˆAI å¿…é¡»æä¾›ï¼‰

AI ç”Ÿæˆä»£ç åå¿…é¡»ç»™å‡ºä»¥ä¸‹å¯éªŒè¯å†…å®¹ï¼š

1. `schema.sql`ï¼šåŒ…å«æ–°å¢ 4 å¼ è¡¨ï¼ˆcontent/content_like/content_favorite/content_commentï¼‰
2. `api.http`ï¼šè‡³å°‘ 20 æ¡æµ‹è¯•ç”¨ä¾‹ï¼Œè¦†ç›–ï¼š
   - å‘å¸ƒã€å†…å®¹æµã€è¯¦æƒ…
   - ç‚¹èµ/å–æ¶ˆç‚¹èµ
   - æ”¶è—/å–æ¶ˆæ”¶è—
   - è¯„è®ºæ–°å¢/åˆ—è¡¨/åˆ é™¤
   - æƒé™æ ¡éªŒï¼ˆæ¸¸å®¢ç‚¹èµåº”å¤±è´¥ï¼‰
   - é™æµï¼ˆè¿ç»­ç‚¹èµè§¦å‘ 429ï¼‰

3. `README`ï¼šä¸€é”®å¯åŠ¨æ­¥éª¤ï¼ˆdocker compose + åç«¯å¯åŠ¨ + worker + app baseUrl é…ç½®ï¼‰
4. Android App å¯æ¼”ç¤ºé—­ç¯ï¼š
   - ä» WorkDetail å‘å¸ƒåˆ°ç¤¾åŒº
   - å‘ç°é¡µçœ‹åˆ°å†…å®¹
   - è¯¦æƒ…é¡µç‚¹èµ/æ”¶è—/è¯„è®ºæˆåŠŸ
   - æˆ‘çš„æ”¶è—èƒ½çœ‹åˆ°
   - æˆ‘çš„å‘å¸ƒèƒ½ä¸‹æ¶/åˆ é™¤

---
